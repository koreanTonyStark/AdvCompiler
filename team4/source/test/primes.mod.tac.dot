digraph IR {
  graph [fontname="Times New Roman",fontsize=10];
  node  [fontname="Courier New",fontsize=10];
  edge  [fontname="Times New Roman",fontsize=10];

  // scope 'primes'
  primes_cb [label="primes\r  0:     &()    *t0 <- &_str_9\l  1:     param  0 <- t0\l  2:     call   WriteStr\l  3:     call   WriteLn\l  4:     &()    *t1 <- &_str_10\l  5:     param  0 <- t1\l  6:     call   WriteStr\l  7:     call   t2 <- ReadInt\l  8:     assign n <- t2\l  9:     param  1 <- n\l 10:     &()    *t3 <- &p\l 11:     param  0 <- t3\l 12:     call   t4 <- CalcPrimes\l 13:     assign pn <- t4\l 14:     param  2 <- pn\l 15:     param  1 <- n\l 16:     &()    *t5 <- &p\l 17:     param  0 <- t5\l 18:     call   PrintPrimes\l",shape=box]
  // scope 'CalcPrimes'
  CalcPrimes_cb [label="CalcPrimes\r  0:     &()    *t6 <- &_str_1\l  1:     param  0 <- t6\l  2:     call   WriteStr\l  3:     param  0 <- n\l  4:     call   WriteInt\l  5:     &()    *t7 <- &_str_2\l  6:     param  0 <- t7\l  7:     call   WriteStr\l  8:     param  1 <- 1\l  9:     param  0 <- p\l 10:     call   t8 <- DIM\l 11:     assign N <- t8\l 12:     if     N < 1 goto 5_if_true\l 13:     goto   6_if_false\l 14: 5_if_true:\l 15:     return 0\l 16:     goto   4\l 17: 6_if_false:\l 18: 4:\l 19:     mul    t9 <- 0, 4\l 20:     param  0 <- p\l 21:     call   t10 <- DOFS\l 22:     add    t11 <- t9, t10\l 23:     add    t12 <- p, t11\l 24:     assign @t12 <- 1  // *t12 = &p\l 25:     mul    t13 <- 1, 4\l 26:     param  0 <- p\l 27:     call   t14 <- DOFS\l 28:     add    t15 <- t13, t14\l 29:     add    t16 <- p, t15\l 30:     assign @t16 <- 2  // *t16 = &p\l 31:     assign pidx <- 2\l 32:     assign psqrt <- 1\l 33:     assign v <- 3\l 34: 15_while_cond:\l 35:     if     v <= n goto 16_while_body\l 36:     goto   14\l 37: 16_while_body:\l 38:     assign isprime <- 1\l 39:     assign i <- 1\l 40: 21_while_cond:\l 41:     if     isprime = 1 goto 23\l 42:     goto   20\l 43: 23:\l 44:     if     i <= psqrt goto 22_while_body\l 45:     goto   20\l 46: 22_while_body:\l 47:     mul    t17 <- i, 4\l 48:     param  0 <- p\l 49:     call   t18 <- DOFS\l 50:     add    t19 <- t17, t18\l 51:     add    t20 <- p, t19\l 52:     div    t21 <- v, @t20\l 53:     mul    t22 <- i, 4\l 54:     param  0 <- p\l 55:     call   t23 <- DOFS\l 56:     add    t24 <- t22, t23\l 57:     add    t25 <- p, t24\l 58:     mul    t26 <- t21, @t25\l 59:     if     t26 = v goto 26_if_true\l 60:     goto   27_if_false\l 61: 26_if_true:\l 62:     assign isprime <- 0\l 63:     goto   25\l 64: 27_if_false:\l 65: 25:\l 66:     add    t27 <- i, 1\l 67:     assign i <- t27\l 68:     goto   21_while_cond\l 69: 20:\l 70:     if     isprime = 1 goto 32_if_true\l 71:     goto   33_if_false\l 72: 32_if_true:\l 73:     mul    t28 <- pidx, 4\l 74:     param  0 <- p\l 75:     call   t29 <- DOFS\l 76:     add    t30 <- t28, t29\l 77:     add    t31 <- p, t30\l 78:     assign @t31 <- v  // *t31 = &p\l 79:     add    t32 <- pidx, 1\l 80:     assign pidx <- t32\l 81:     if     pidx = N goto 38_if_true\l 82:     goto   39_if_false\l 83: 38_if_true:\l 84:     &()    *t33 <- &_str_3\l 85:     param  0 <- t33\l 86:     call   WriteStr\l 87:     assign n <- 0\l 88:     goto   37\l 89: 39_if_false:\l 90: 37:\l 91:     goto   31\l 92: 33_if_false:\l 93: 31:\l 94:     add    t34 <- v, 2\l 95:     assign v <- t34\l 96:     mul    t35 <- psqrt, 4\l 97:     param  0 <- p\l 98:     call   t36 <- DOFS\l 99:     add    t37 <- t35, t36\l100:     add    t38 <- p, t37\l101:     mul    t39 <- psqrt, 4\l102:     param  0 <- p\l103:     call   t40 <- DOFS\l104:     add    t41 <- t39, t40\l105:     add    t42 <- p, t41\l106:     mul    t43 <- @t38, @t42\l107:     if     v > t43 goto 45_if_true\l108:     goto   46_if_false\l109: 45_if_true:\l110:     add    t44 <- psqrt, 1\l111:     assign psqrt <- t44\l112:     if     psqrt >= pidx goto 50_if_true\l113:     goto   51_if_false\l114: 50_if_true:\l115:     &()    *t45 <- &_str_4\l116:     param  0 <- t45\l117:     call   WriteStr\l118:     assign n <- 0\l119:     goto   49\l120: 51_if_false:\l121: 49:\l122:     goto   44\l123: 46_if_false:\l124: 44:\l125:     goto   15_while_cond\l126: 14:\l127:     &()    *t46 <- &_str_5\l128:     param  0 <- t46\l129:     call   WriteStr\l130:     param  0 <- pidx\l131:     call   WriteInt\l132:     &()    *t47 <- &_str_6\l133:     param  0 <- t47\l134:     call   WriteStr\l135:     call   WriteLn\l136:     return pidx\l",shape=box]
  // scope 'PrintPrimes'
  PrintPrimes_cb [label="PrintPrimes\r  0:     &()    *t6 <- &_str_7\l  1:     param  0 <- t6\l  2:     call   WriteStr\l  3:     param  0 <- n\l  4:     call   WriteInt\l  5:     call   WriteLn\l  6:     assign i <- 0\l  7: 5_while_cond:\l  8:     if     i < pn goto 6_while_body\l  9:     goto   4\l 10: 6_while_body:\l 11:     &()    *t7 <- &_str_8\l 12:     param  0 <- t7\l 13:     call   WriteStr\l 14:     mul    t8 <- i, 4\l 15:     param  0 <- p\l 16:     call   t9 <- DOFS\l 17:     add    t10 <- t8, t9\l 18:     add    t11 <- p, t10\l 19:     param  0 <- @t11\l 20:     call   WriteInt\l 21:     add    t12 <- i, 1\l 22:     assign i <- t12\l 23:     div    t13 <- i, 8\l 24:     mul    t14 <- t13, 8\l 25:     if     t14 = i goto 12_if_true\l 26:     goto   13_if_false\l 27: 12_if_true:\l 28:     call   WriteLn\l 29:     goto   11\l 30: 13_if_false:\l 31: 11:\l 32:     goto   5_while_cond\l 33: 4:\l 34:     call   WriteLn\l",shape=box]
}
