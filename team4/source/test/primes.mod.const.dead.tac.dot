digraph IR {
  graph [fontname="Times New Roman",fontsize=10];
  node  [fontname="Courier New",fontsize=10];
  edge  [fontname="Times New Roman",fontsize=10];

  // scope 'primes'
  primes_cb [label="primes\r  0:     &()    *t0 <- &_str_9\l  1:     param  0 <- t0\l  2:     call   WriteStr\l  3:     call   WriteLn\l  4:     &()    *t1 <- &_str_10\l  5:     param  0 <- t1\l  6:     call   WriteStr\l  7:     call   t2 <- ReadInt\l  8:     assign n <- t2\l  9:     param  1 <- n\l 10:     &()    *t3 <- &p\l 11:     param  0 <- t3\l 12:     call   t4 <- CalcPrimes\l 13:     assign pn <- t4\l 14:     param  2 <- pn\l 15:     param  1 <- n\l 16:     &()    *t5 <- &p\l 17:     param  0 <- t5\l 18:     call   PrintPrimes\l",shape=box]
  // scope 'CalcPrimes'
  CalcPrimes_cb [label="CalcPrimes\r  0:     &()    *t6 <- &_str_1\l  1:     param  0 <- t6\l  2:     call   WriteStr\l  3:     param  0 <- n\l  4:     call   WriteInt\l  5:     &()    *t7 <- &_str_2\l  6:     param  0 <- t7\l  7:     call   WriteStr\l  8:     param  1 <- 1\l  9:     param  0 <- p\l 10:     call   t8 <- DIM\l 11:     if     t8 < 1 goto 5_if_true\l 12:     goto   6_if_false\l 13: 5_if_true:\l 14:     return 0\l 15:     goto   4\l 16: 6_if_false:\l 17: 4:\l 18:     param  0 <- p\l 19:     call   t10 <- DOFS\l 20:     add    t11 <- 0, t10\l 21:     add    t12 <- p, t11\l 22:     assign @t12 <- 1  // *t12 = &p\l 23:     param  0 <- p\l 24:     call   t14 <- DOFS\l 25:     add    t15 <- 4, t14\l 26:     add    t16 <- p, t15\l 27:     assign @t16 <- 2  // *t16 = &p\l 28:     assign pidx <- 2\l 29:     assign psqrt <- 1\l 30:     assign v <- 3\l 31: 15_while_cond:\l 32:     if     v <= n goto 16_while_body\l 33:     goto   14\l 34: 16_while_body:\l 35:     assign isprime <- 1\l 36:     assign i <- 1\l 37: 21_while_cond:\l 38:     if     isprime = 1 goto 23\l 39:     goto   20\l 40: 23:\l 41:     if     i <= psqrt goto 22_while_body\l 42:     goto   20\l 43: 22_while_body:\l 44:     mul    t17 <- i, 4\l 45:     param  0 <- p\l 46:     call   t18 <- DOFS\l 47:     add    t19 <- t17, t18\l 48:     add    t20 <- p, t19\l 49:     div    t21 <- v, @t20\l 50:     mul    t22 <- i, 4\l 51:     param  0 <- p\l 52:     call   t23 <- DOFS\l 53:     add    t24 <- t22, t23\l 54:     add    t25 <- p, t24\l 55:     mul    t26 <- t21, @t25\l 56:     if     t26 = v goto 26_if_true\l 57:     goto   27_if_false\l 58: 26_if_true:\l 59:     assign isprime <- 0\l 60:     goto   25\l 61: 27_if_false:\l 62: 25:\l 63:     add    t27 <- i, 1\l 64:     assign i <- t27\l 65:     goto   21_while_cond\l 66: 20:\l 67:     if     isprime = 1 goto 32_if_true\l 68:     goto   33_if_false\l 69: 32_if_true:\l 70:     mul    t28 <- pidx, 4\l 71:     param  0 <- p\l 72:     call   t29 <- DOFS\l 73:     add    t30 <- t28, t29\l 74:     add    t31 <- p, t30\l 75:     assign @t31 <- v  // *t31 = &p\l 76:     add    t32 <- pidx, 1\l 77:     assign pidx <- t32\l 78:     if     t32 = t8 goto 38_if_true\l 79:     goto   39_if_false\l 80: 38_if_true:\l 81:     &()    *t33 <- &_str_3\l 82:     param  0 <- t33\l 83:     call   WriteStr\l 84:     assign n <- 0\l 85:     goto   37\l 86: 39_if_false:\l 87: 37:\l 88:     goto   31\l 89: 33_if_false:\l 90: 31:\l 91:     add    t34 <- v, 2\l 92:     assign v <- t34\l 93:     mul    t35 <- psqrt, 4\l 94:     param  0 <- p\l 95:     call   t36 <- DOFS\l 96:     add    t37 <- t35, t36\l 97:     add    t38 <- p, t37\l 98:     mul    t39 <- psqrt, 4\l 99:     param  0 <- p\l100:     call   t40 <- DOFS\l101:     add    t41 <- t39, t40\l102:     add    t42 <- p, t41\l103:     mul    t43 <- @t38, @t42\l104:     if     t34 > t43 goto 45_if_true\l105:     goto   46_if_false\l106: 45_if_true:\l107:     add    t44 <- psqrt, 1\l108:     assign psqrt <- t44\l109:     if     t44 >= pidx goto 50_if_true\l110:     goto   51_if_false\l111: 50_if_true:\l112:     &()    *t45 <- &_str_4\l113:     param  0 <- t45\l114:     call   WriteStr\l115:     assign n <- 0\l116:     goto   49\l117: 51_if_false:\l118: 49:\l119:     goto   44\l120: 46_if_false:\l121: 44:\l122:     goto   15_while_cond\l123: 14:\l124:     &()    *t46 <- &_str_5\l125:     param  0 <- t46\l126:     call   WriteStr\l127:     param  0 <- pidx\l128:     call   WriteInt\l129:     &()    *t47 <- &_str_6\l130:     param  0 <- t47\l131:     call   WriteStr\l132:     call   WriteLn\l133:     return pidx\l",shape=box]
  // scope 'PrintPrimes'
  PrintPrimes_cb [label="PrintPrimes\r  0:     &()    *t6 <- &_str_7\l  1:     param  0 <- t6\l  2:     call   WriteStr\l  3:     param  0 <- n\l  4:     call   WriteInt\l  5:     call   WriteLn\l  6:     assign i <- 0\l  7: 5_while_cond:\l  8:     if     i < pn goto 6_while_body\l  9:     goto   4\l 10: 6_while_body:\l 11:     &()    *t7 <- &_str_8\l 12:     param  0 <- t7\l 13:     call   WriteStr\l 14:     mul    t8 <- i, 4\l 15:     param  0 <- p\l 16:     call   t9 <- DOFS\l 17:     add    t10 <- t8, t9\l 18:     add    t11 <- p, t10\l 19:     param  0 <- @t11\l 20:     call   WriteInt\l 21:     add    t12 <- i, 1\l 22:     assign i <- t12\l 23:     div    t13 <- t12, 8\l 24:     mul    t14 <- t13, 8\l 25:     if     t14 = t12 goto 12_if_true\l 26:     goto   13_if_false\l 27: 12_if_true:\l 28:     call   WriteLn\l 29:     goto   11\l 30: 13_if_false:\l 31: 11:\l 32:     goto   5_while_cond\l 33: 4:\l 34:     call   WriteLn\l",shape=box]
}
